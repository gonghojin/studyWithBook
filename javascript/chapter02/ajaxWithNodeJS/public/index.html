<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Data Process</title>
</head>
<body>
    <button id="get">GET</button>
    <button id="post">POST</button>
    <button id="put">PUT</button>
    <button id="delete">DELETE</button>
    <h1>input</h1>
    <input id="name" />
    <input id="price" />
    <h1>output</h1>
    <textarea id="output" disabled="disabled" cols="40" rows="5"></textarea>
    <script>
    window.onload = function () {
    /*
        function testXml(type, url) {
            var request = new XMLHttpRequest();
            request.open(type, url, true);
            request.send();
            request.onreadystatechange = function (evnet) {
                if (request.readyState == 4) {
                    if(request.status == 200) {
                        document.getElementById("output").value = request.responseText;
                    }
                }
            }
        }*/

        document.getElementById("get").onclick = function () {
            var request = new XMLHttpRequest();
            request.open("GET", "/products", true);
            request.send();
            request.onreadystatechange = function (event) {
                if (request.readyState == 4) {
                    if (request.status == 200) {
                        document.getElementById("output").value = request.responseText;
                    }
                }
            }
        };
        document.getElementById("post").onclick = function () {
            // 변수 선언
            var name = document.getElementById("name").value;
            var price = document.getElementById("price").value;


            var request = new XMLHttpRequest();
            request.open("POST", "/products", true);
            request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
            request.send("name=" + name + "&price=" + price);
            request.onreadystatechange = function (event) {
                if (request.readyState == 4) {
                    if (request.status == 200) {
                        document.getElementById("output").value = request.responseText;
                    }
                }
            }
        };
        document.getElementById("put").onclick = function () {
            var name = document.getElementById("name").value;
            var price = document.getElementById("price").value;

            var request = new XMLHttpRequest();
            request.open("PUT", "/products/0", true);
            request.send("name=" + name + "&price=" + price);
            request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
            request.onreadystatechage = function (evnet) {
                if (request.readyState == 4) {
                    if (request.status == 200) {
                        document.getElementById("output").value = request.responseText;
                    }
                }
            };
        };
        document.getElementById("delete").onclick = function () {
            var request = new XMLHttpRequest();
            request.open("DELETE", "/products/0", true);
            request.send();
            request.onreadystatechange = function (event) {
                if(request.readyState == 4) {
                    if(request.status == 200) {
                        document.getElementById("output").value = request.responseText;
                    }
                }
            }
        };
    };
</script>
</body>
</html>